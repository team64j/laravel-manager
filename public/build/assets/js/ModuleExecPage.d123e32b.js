import{_ as r,a as c}from"../app.2d7615bf.js";import"./vue.c7926159.js";import{a as n,c as m,g as a,aM as u,o as s}from"./@vue.21d3b485.js";import"./vue-codemirror.f710c5d3.js";import"./codemirror.65c2c8aa.js";import"./@codemirror.86619810.js";import"./@lezer.13b71bd8.js";import"./crelt.2ca95e67.js";import"./style-mod.dd020e09.js";import"./w3c-keyname.f0bedd1c.js";import"./vuedraggable.6704fbca.js";import"./axios.49d3df40.js";import"./sortablejs.8b43ee28.js";import"./lodash.009183e4.js";import"./@kyvg.9e3dee5d.js";import"./vue-router.5d347134.js";import"./vuex.7e60e04e.js";const d={name:"ModuleExecPage",components:{Layout:c},props:{currentRoute:Object},data(){return this.id=this.currentRoute?.params?.id||null,this.url=document.baseURI+"/web/module/exec/"+this.id,{type:null,data:null,meta:null,layout:null}},created(){this.$emit("action","setTab",{key:this._.vnode.key,loading:!0,meta:{title:this.$root.lang("run_module")}}),this.get()},watch:{"$root.dark"(){const t=getComputedStyle(document.body);this.$el.firstElementChild.contentDocument.body.style.backgroundColor=t.backgroundColor,this.$el.firstElementChild.contentDocument.body.style.color=t.color}},methods:{get(){axios.get(this.url,{params:this.currentRoute.query||null}).then(t=>{t.headers["content-type"]==="application/json"?(this.type="json",this.data=t.data?.data,this.meta=t.data?.meta,this.layout=t.data?.layout):(this.type="html",setTimeout(()=>{this.$el.firstElementChild.onload=function(l){const o=getComputedStyle(document.body);this.contentDocument.body.style.backgroundColor=o.backgroundColor,this.contentDocument.body.style.color=o.color}},0)),this.$emit("action","setTab",{key:this._.vnode.key,loading:!1,meta:{title:this.$root.lang("run_module")}})})}}},p={class:"flex flex-col"},y=["src"];function h(t,l,o,_,e,b){const i=u("layout");return s(),n("div",p,[e.type==="json"?(s(),m(i,{key:0,data:e.data,meta:e.meta,layout:e.layout},null,8,["data","meta","layout"])):a("",!0),e.type==="html"?(s(),n("iframe",{key:1,src:this.url},null,8,y)):a("",!0)])}const S=r(d,[["render",h],["__scopeId","data-v-24dbb59d"]]);export{S as default};
