import{_ as s,a as r}from"../app.ca983809.js";import"./vue.c7926159.js";import{c,aM as m,o as u}from"./@vue.21d3b485.js";import"./vue-codemirror.f710c5d3.js";import"./codemirror.65c2c8aa.js";import"./@codemirror.86619810.js";import"./@lezer.13b71bd8.js";import"./crelt.2ca95e67.js";import"./style-mod.dd020e09.js";import"./w3c-keyname.f0bedd1c.js";import"./vuedraggable.6704fbca.js";import"./axios.49d3df40.js";import"./sortablejs.8b43ee28.js";import"./lodash.009183e4.js";import"./@kyvg.9e3dee5d.js";import"./vue-router.5d347134.js";import"./vuex.7e60e04e.js";const l={name:"ConfigurationPage",components:{Layout:r},props:{currentRoute:Object},data(){return{data:null,meta:null,layout:null}},created(){this.$emit("action","setTab",{key:this._.vnode.key,changed:!1,loading:!0}),this.get()},methods:{action(){typeof this[arguments[0]]=="function"?this[arguments[0]](...Array.from(arguments).splice(1)):this.$emit("action",...arguments)},cancel(){this.$emit("action","closeTab")},save(){this.$emit("action","setTab",{key:this._.vnode.key,changed:!1,loading:!0});const t=[];for(let a in this.data)t.push({setting_name:a,setting_value:this.data[a]});axios.post("api/configuration",t).then(()=>{this.$emit("action","setTab",{changed:!1}),this.$emit("action","closeTab",()=>setTimeout(()=>location.reload(),0))})},get(){axios.get("api/configuration").then(t=>{this.data=t.data.data,this.meta=t.data.meta,this.layout=t.data.layout,this.$emit("action","setTab",{key:this._.vnode.key,changed:!1,loading:!1}),this.$watch(()=>this.data,()=>{this.$emit("action","setTab",{key:this._.vnode.key,changed:!0})},{deep:!0})})}}};function h(t,a,o,p,e,i){const n=m("layout");return u(),c(n,{data:e.data,meta:e.meta,layout:e.layout,onAction:i.action,"current-route":o.currentRoute},null,8,["data","meta","layout","onAction","current-route"])}const w=s(l,[["render",h]]);export{w as default};
